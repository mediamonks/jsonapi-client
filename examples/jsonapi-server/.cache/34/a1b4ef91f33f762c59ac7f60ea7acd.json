{"id":"../../new/lib/Resource.ts","dependencies":[{"name":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/tsconfig.json","includedInParent":true,"mtime":1566390790929},{"name":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/examples/jsonapi-server/package.json","includedInParent":true,"mtime":1566390790915},{"name":"./ResourceField","loc":{"line":1,"column":41},"parent":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/new/lib/Resource.ts","resolved":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/new/lib/ResourceField.ts"},{"name":"./ResourceIdentifier","loc":{"line":2,"column":35},"parent":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/new/lib/Resource.ts","resolved":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/new/lib/ResourceIdentifier.ts"},{"name":"../../src/utils/data","loc":{"line":3,"column":34},"parent":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/new/lib/Resource.ts","resolved":"/Users/nathanuphoff/Projects/~lab/jsonapi-client/src/utils/data.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resource = exports.resourceRepository = void 0;\n\nvar _ResourceField = require(\"./ResourceField\");\n\nvar _ResourceIdentifier2 = require(\"./ResourceIdentifier\");\n\nvar _data = require(\"../../src/utils/data\");\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar resourceRepository = new Map();\nexports.resourceRepository = resourceRepository;\n\nvar resource = function resource(type) {\n  if (resourceRepository.has(type)) {\n    throw new Error(\"Duplicate type: Resource of \".concat(type, \" already exists\"));\n  }\n\n  var ApiResource =\n  /*#__PURE__*/\n  function (_ResourceIdentifier) {\n    _inherits(ApiResource, _ResourceIdentifier);\n\n    function ApiResource(item) {\n      var _this;\n\n      _classCallCheck(this, ApiResource);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(ApiResource).call(this, item.type, item.id));\n      Object.assign(_assertThisInitialized(_this), item);\n      return _this;\n    }\n\n    _createClass(ApiResource, null, [{\n      key: \"identifier\",\n      value: function identifier(id) {\n        return new _ResourceIdentifier2.ResourceIdentifier(type, id);\n      }\n    }]);\n\n    return ApiResource;\n  }(_ResourceIdentifier2.ResourceIdentifier);\n\n  ApiResource.type = type;\n  ApiResource.fields = createResourceBaseFields(type);\n  resourceRepository.set(type, ApiResource);\n  return ApiResource;\n};\n\nexports.resource = resource;\n\nvar createResourceBaseFields = function createResourceBaseFields(type) {\n  return Object.assign((0, _data.createEmptyObject)(), {\n    type: new _ResourceField.ResourceIdentifierField('type', literal(type)),\n    id: new _ResourceField.ResourceIdentifierField('id', isStringWithLength)\n  });\n};\n\nvar isStringWithLength = function isStringWithLength(value) {\n  return typeof value === 'string' && value.length !== 0;\n};\n\nvar literal = function literal(literalValue) {\n  return function (value) {\n    return value === literalValue;\n  };\n};"},"sourceMaps":{"js":{"mappings":[{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":8,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":10,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":12,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":86,"column":7},"generated":{"line":32,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":86,"column":13},"generated":{"line":32,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":86,"column":31},"generated":{"line":32,"column":22}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":89,"column":4},"generated":{"line":32,"column":25}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":32,"column":29}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":89,"column":4},"generated":{"line":32,"column":32}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":86,"column":7},"generated":{"line":32,"column":34}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":7},"generated":{"line":35,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":13},"generated":{"line":35,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":21},"generated":{"line":35,"column":12}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":24},"generated":{"line":35,"column":15}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":13},"generated":{"line":35,"column":24}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":24},"generated":{"line":35,"column":32}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":49},"generated":{"line":35,"column":33}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":24},"generated":{"line":35,"column":37}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":35,"column":39}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":36,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":36,"column":6}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":24},"generated":{"line":36,"column":24}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":25},"generated":{"line":36,"column":25}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":36,"column":28}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":29},"generated":{"line":36,"column":29}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":36,"column":33}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":36,"column":34}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":92,"column":36},"generated":{"line":36,"column":36}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":93,"column":4},"generated":{"line":37,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":93,"column":10},"generated":{"line":37,"column":10}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":93,"column":14},"generated":{"line":37,"column":14}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":93,"column":10},"generated":{"line":37,"column":19}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":93,"column":51},"generated":{"line":37,"column":58}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":93,"column":10},"generated":{"line":37,"column":62}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":93,"column":4},"generated":{"line":37,"column":83}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":94,"column":3},"generated":{"line":38,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":40,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":95,"column":8},"generated":{"line":40,"column":6}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":40,"column":17}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":41,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":42,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":43,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":104,"column":4},"generated":{"line":45,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":104,"column":16},"generated":{"line":45,"column":25}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":104,"column":4},"generated":{"line":45,"column":29}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":104,"column":23},"generated":{"line":45,"column":31}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":104,"column":23},"generated":{"line":46,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":104,"column":23},"generated":{"line":48,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":6},"generated":{"line":50,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":12},"generated":{"line":50,"column":87}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":16},"generated":{"line":50,"column":91}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":17},"generated":{"line":50,"column":92}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":6},"generated":{"line":50,"column":96}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":23},"generated":{"line":50,"column":98}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":27},"generated":{"line":50,"column":102}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":28},"generated":{"line":50,"column":103}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":105,"column":6},"generated":{"line":50,"column":105}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":106,"column":6},"generated":{"line":51,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":106,"column":6},"generated":{"line":51,"column":6}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":106,"column":12},"generated":{"line":51,"column":12}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":106,"column":13},"generated":{"line":51,"column":13}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":106,"column":6},"generated":{"line":51,"column":19}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":106,"column":26},"generated":{"line":51,"column":51}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":106,"column":6},"generated":{"line":51,"column":55}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":104,"column":23},"generated":{"line":52,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":107,"column":5},"generated":{"line":53,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":55,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":56,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":57,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":100,"column":22},"generated":{"line":57,"column":33}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":57,"column":35}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":100,"column":36},"generated":{"line":57,"column":37}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":6},"generated":{"line":58,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":13},"generated":{"line":58,"column":15}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":17},"generated":{"line":58,"column":19}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":13},"generated":{"line":58,"column":58}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":36},"generated":{"line":58,"column":59}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":13},"generated":{"line":58,"column":63}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":42},"generated":{"line":58,"column":65}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":13},"generated":{"line":58,"column":67}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":101,"column":6},"generated":{"line":58,"column":68}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":102,"column":5},"generated":{"line":59,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":60,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":62,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":63,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":95,"column":54},"generated":{"line":63,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":63,"column":43}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":96,"column":11},"generated":{"line":65,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":96,"column":11},"generated":{"line":65,"column":2}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":96,"column":11},"generated":{"line":65,"column":13}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":96,"column":11},"generated":{"line":65,"column":14}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":96,"column":11},"generated":{"line":65,"column":18}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":96,"column":21},"generated":{"line":65,"column":21}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":96,"column":11},"generated":{"line":65,"column":25}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":66,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":66,"column":2}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":66,"column":13}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":66,"column":14}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":66,"column":20}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":99,"column":8},"generated":{"line":66,"column":23}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":99,"column":32},"generated":{"line":66,"column":47}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":99,"column":33},"generated":{"line":66,"column":48}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":99,"column":32},"generated":{"line":66,"column":52}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":66,"column":53}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":67,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":67,"column":2}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":20},"generated":{"line":67,"column":20}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":21},"generated":{"line":67,"column":21}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":67,"column":24}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":25},"generated":{"line":67,"column":25}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":67,"column":29}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":31},"generated":{"line":67,"column":31}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":67,"column":42}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":110,"column":2},"generated":{"line":68,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":110,"column":9},"generated":{"line":68,"column":9}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":110,"column":2},"generated":{"line":68,"column":20}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":111,"column":1},"generated":{"line":69,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":91,"column":7},"generated":{"line":69,"column":1}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":0},"generated":{"line":73,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":6},"generated":{"line":73,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":30},"generated":{"line":73,"column":28}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":33},"generated":{"line":73,"column":31}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":6},"generated":{"line":73,"column":40}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":33},"generated":{"line":73,"column":64}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":58},"generated":{"line":73,"column":65}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":33},"generated":{"line":73,"column":69}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":33},"generated":{"line":74,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":74,"column":9}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":8},"generated":{"line":74,"column":15}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":9},"generated":{"line":74,"column":16}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":74,"column":22}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":16},"generated":{"line":74,"column":23}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":74,"column":53}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":37},"generated":{"line":74,"column":55}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":75,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":75,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":8},"generated":{"line":75,"column":8}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":75,"column":10}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":14},"generated":{"line":75,"column":14}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":75,"column":52}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":38},"generated":{"line":75,"column":53}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":75,"column":59}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":46},"generated":{"line":75,"column":61}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":53},"generated":{"line":75,"column":68}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":54},"generated":{"line":75,"column":69}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":53},"generated":{"line":75,"column":73}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":75,"column":74}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":37},"generated":{"line":75,"column":75}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":4},"generated":{"line":76,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":4},"generated":{"line":76,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":76,"column":6}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":8},"generated":{"line":76,"column":8}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":12},"generated":{"line":76,"column":12}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":8},"generated":{"line":76,"column":50}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":36},"generated":{"line":76,"column":51}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":8},"generated":{"line":76,"column":55}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":42},"generated":{"line":76,"column":57}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":116,"column":8},"generated":{"line":76,"column":75}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":37},"generated":{"line":77,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":77,"column":3}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":33},"generated":{"line":77,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":33},"generated":{"line":78,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":113,"column":0},"generated":{"line":78,"column":1}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":0},"generated":{"line":80,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":6},"generated":{"line":80,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":24},"generated":{"line":80,"column":22}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":27},"generated":{"line":80,"column":25}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":6},"generated":{"line":80,"column":34}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":27},"generated":{"line":80,"column":52}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":28},"generated":{"line":80,"column":53}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":27},"generated":{"line":80,"column":58}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":27},"generated":{"line":81,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":2},"generated":{"line":81,"column":9}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":9},"generated":{"line":81,"column":16}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":2},"generated":{"line":81,"column":21}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":19},"generated":{"line":81,"column":26}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":2},"generated":{"line":81,"column":34}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":31},"generated":{"line":81,"column":38}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":36},"generated":{"line":81,"column":43}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":37},"generated":{"line":81,"column":44}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":31},"generated":{"line":81,"column":50}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":120,"column":48},"generated":{"line":81,"column":55}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":27},"generated":{"line":81,"column":56}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":27},"generated":{"line":82,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":119,"column":0},"generated":{"line":82,"column":1}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":0},"generated":{"line":84,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":6},"generated":{"line":84,"column":4}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":13},"generated":{"line":84,"column":11}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":84,"column":14}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":6},"generated":{"line":84,"column":23}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":84,"column":30}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":35},"generated":{"line":84,"column":31}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":84,"column":43}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":85,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":55},"generated":{"line":85,"column":9}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":123,"column":2},"generated":{"line":85,"column":19}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":55},"generated":{"line":85,"column":24}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":55},"generated":{"line":86,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":124,"column":17},"generated":{"line":86,"column":11}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":124,"column":22},"generated":{"line":86,"column":16}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":124,"column":27},"generated":{"line":86,"column":21}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":55},"generated":{"line":86,"column":33}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":55},"generated":{"line":87,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":87,"column":3}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":88,"column":0}},{"source":"../../new/lib/Resource.ts","name":null,"original":{"line":122,"column":0},"generated":{"line":88,"column":1}}],"sources":{"../../new/lib/Resource.ts":"import {\n  Nullable,\n  WithoutNever,\n  WithOptional,\n} from '../declarations/util-types'\nimport {\n  AnyResourceRelationship,\n  AnyToManyResourceRelationship,\n  ResourceAttributeField,\n  ResourceAttributeFieldValue,\n  ResourceFieldName,\n  ResourceFieldValue,\n  ResourceIdentifierField,\n  ResourceRelationshipField,\n  ResourceRelationshipFieldResourceIdentifier,\n} from './ResourceField'\nimport { ResourceIdentifier, ResourceIdentifierKey } from './ResourceIdentifier'\nimport { createEmptyObject } from '../../src/utils/data'\n\nexport type AnyResource = Resource<ResourceType, {}>\n\nexport type AnyResourceConstructor = ResourceConstructor<AnyResource>\n\nexport type ResourceType = string\nexport type ResourceId = string\n\nexport type ResourceCreateData<R extends AnyResource> = WithOptional<\n  {\n    [K in keyof R]: R[K] extends AnyResourceRelationship\n      ? R[K] extends AnyToManyResourceRelationship\n        ? Array<ResourceRelationshipFieldResourceIdentifier<R[K]>>\n        : Nullable<ResourceRelationshipFieldResourceIdentifier<R[K]>>\n      : R[K] extends ResourceAttributeFieldValue\n      ? R[K]\n      : never\n  },\n  ResourceIdentifierKey\n>\n\nexport type ResourcePatchData<R extends AnyResource> = WithOptional<\n  {\n    [K in keyof R]: R[K] extends AnyResourceRelationship\n      ? R[K] extends AnyToManyResourceRelationship\n        ? Array<ResourceRelationshipFieldResourceIdentifier<R[K]>>\n        : Nullable<ResourceRelationshipFieldResourceIdentifier<R[K]>>\n      : R[K] extends ResourceAttributeFieldValue\n      ? R[K]\n      : never\n  },\n  'type'\n>\n\nexport type ResourceFields<R extends AnyResource> = WithoutNever<\n  {\n    [K in keyof R]: K extends ResourceIdentifierKey\n      ? ResourceIdentifierField<K, R[K]>\n      : R[K] extends AnyResourceRelationship\n      ? ResourceRelationshipField<string & K, R[K]>\n      : R[K] extends ResourceAttributeFieldValue\n      ? ResourceAttributeField<string & K, R[K]>\n      : never\n  }\n>\n\nexport type Resource<\n  T extends ResourceType,\n  M extends Omit<Resource<T, M>, ResourceIdentifierKey>\n> = ResourceIdentifier<T> &\n  WithoutNever<\n    {\n      [K in keyof M]: K extends ResourceFieldName\n        ? M[K] extends ResourceFieldValue\n          ? M[K]\n          : never\n        : never\n    }\n  >\n\nexport type ResourceConstructor<R extends AnyResource> = {\n  type: R['type']\n  fields: ResourceFields<ResourceIdentifier<R['type']>>\n  identifier: (id: ResourceId) => ResourceIdentifier<R['type']>\n  new (item: R): R\n}\n\nexport const resourceRepository: Map<\n  ResourceType,\n  AnyResourceConstructor\n> = new Map()\n\nexport const resource = <T extends ResourceType>(type: T) => {\n  if (resourceRepository.has(type)) {\n    throw new Error(`Duplicate type: Resource of ${type} already exists`)\n  }\n  class ApiResource<R extends Resource<T, R>> extends ResourceIdentifier<T> {\n    static type: T = type\n    static fields: ResourceFields<\n      ResourceIdentifier<T>\n    > = createResourceBaseFields(type)\n    static identifier(id: ResourceId): ResourceIdentifier<T> {\n      return new ResourceIdentifier(type, id)\n    }\n\n    constructor(item: R) {\n      super(item.type, item.id)\n      Object.assign(this, item)\n    }\n  }\n  resourceRepository.set(type, ApiResource as any)\n  return ApiResource\n}\n\nconst createResourceBaseFields = <T extends ResourceType>(type: T) =>\n  Object.assign(createEmptyObject(), {\n    type: new ResourceIdentifierField('type', literal(type)),\n    id: new ResourceIdentifierField('id', isStringWithLength),\n  })\n\nconst isStringWithLength = (value: any): value is string =>\n  typeof value === 'string' && value.length !== 0\n\nconst literal = <T extends string>(literalValue: T) => (\n  value: any,\n): value is T => value === literalValue\n"},"lineCount":null}},"error":null,"hash":"74e298e4ec9b5fd306a57f1d4c153799","cacheData":{"env":{}}}